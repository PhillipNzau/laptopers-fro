<section class="w-full h-1/2 p-2">
  <div class="bg-gray-200 size-full rounded-4xl overflow-clip relative">
    <img
      [src]="selectedImage() === '' ? hub().images?.[0] : selectedImage()"
      alt=""
      class="object-cover w-full h-full"
    />
    <div
      class="px-3 h-10 flex items-center justify-center rounded-2xl bg-container absolute top-5 left-4 gap-2"
    >
      <p>Target:</p>
      <p>{{ hub().target_amount }} /=</p>
    </div>
  </div>
</section>
<section
  class="p-2 flex gap-2 w-full overflow-x-scroll [&::-webkit-scrollbar]:hidden [-ms-overflow-style:'none'] [scrollbar-width:none]"
>
  @for (img of hub().images; track $index) {
  <div
    class="bg-gray-200 h-24 min-w-36 rounded-2xl overflow-clip"
    (click)="selectImage(img)"
  >
    <img [src]="img" alt="" class="object-cover w-full h-full" />
  </div>
  }
</section>

<!-- Edit if its admin -->
@if (role() === 'admin') {
<div class="p-3 flex justify-end">
  <div class="flex items-center gap-3">
    <p>Edit Event</p>
    <div class="relative inline-block w-11 h-5">
      <input
        id="switch-component"
        type="checkbox"
        [checked]="isToggled()"
        (change)="toggleChanged($event)"
        class="peer appearance-none w-11 h-5 bg-slate-100 rounded-full checked:bg-slate-800 cursor-pointer transition-colors duration-300"
      />
      <label
        for="switch-component"
        class="absolute top-0 left-0 w-5 h-5 bg-white rounded-full border border-slate-300 shadow-sm transition-transform duration-300 peer-checked:translate-x-6 peer-checked:border-slate-800 cursor-pointer"
      ></label>
    </div>
  </div>
</div>
}

<section class="pt-6 px-5 text-text">
  @if (!isToggled()) {
  <div class="flex items-center justify-between">
    <div>
      <h1 class="text-2xl font-bold">{{ hub().title }}</h1>
      <p class="text-sm text-gray-500 flex gap-1 items-center">
        <span
          ><svg
            xmlns="http://www.w3.org/2000/svg"
            width="15"
            height="15"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-map-pin-icon lucide-map-pin"
          >
            <path
              d="M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"
            />
            <circle cx="12" cy="10" r="3" /></svg></span
        >{{ hub().location }}
      </p>
    </div>
    <p
      [ngClass]="{
        'bg-rose-400': !hub().available,
        'bg-primary': hub().available
      }"
      class="py-1 px-3 rounded-full text-sm"
    >
      {{ hub().available ? "Available" : "Occupied" }}
    </p>
  </div>

  <div class="py-6">
    <p class="text-lg font-bold text-text py-1">Description</p>
    <p class="text-md text-gray-500 h-44 overflow-y-scroll py-1">
      {{ hub().description }}
    </p>
  </div>
  } @else {
  <form [formGroup]="eventForm" class="space-y-4 w-full">
    <div class="space-y-3">
      <p class="font-bold">Title</p>
      <input
        formControlName="title"
        class="border rounded p-1 text-shadow w-full"
        placeholder="Enter title"
      />
    </div>
    <div class="space-y-3">
      <p class="font-bold">Location</p>

      <input
        formControlName="location"
        class="border rounded p-1 w-full mt-2 text-shadow"
        placeholder="Enter location"
      />
    </div>

    <div class="space-y-3">
      <p class="font-bold">Availability</p>

      <select
        formControlName="available"
        class="border rounded p-1 text-shadow"
      >
        <option [ngValue]="true">Active</option>
        <option [ngValue]="false">Deactivated</option>
      </select>
    </div>

    <div class="space-y-3">
      <p class="font-bold">Description</p>

      <textarea
        formControlName="description"
        rows="6"
        class="border rounded p-2 w-full text-shadow"
      ></textarea>
    </div>

    <button
      (click)="saveChanges()"
      class="bg-text text-center w-full py-4 text-primary rounded-full mt-2"
    >
      Update
    </button>
  </form>

  }
</section>
